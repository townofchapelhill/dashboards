<!DOCTYPE html>
<html>
<head>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="./assets/css/tablecss.css">
  <title>Budget and Actuals: Technology Solutions</title>
</head>
<body>

  <div class="table-title">
  <h3>Budget and Actuals: Technology Solutions Department</h3>
  </div>
  <p><br/><br/></p>
    <!-- Basic table to display our data from JSON file. -->
    <table class="table">
      <thead>
        <tr>
          <th>Account</th>
          <th>Description</th>
          <th>FY 2017 Revised Budget</th>
          <th>FY 2017 Actual</th>
          <th>FY 2017 Encumbrances</th>
          <th>FY 2017 Available</th>
        </tr>
      </thead>
    </table>
  </div>
  <!-- This script loops through the budget17 JSON file and
    displays fiscal year actual, fiscal year original budget, 
    and fiscal year revised budget information for any data 
    under the Technology Solutions Department and the Computer 
    Replacement Fund. It also stores these in an array (items), to then
    display onto a table on the page.-->
  <script>
    $.getJSON("https://www.chapelhillopendata.org/api/records/1.0/search/?dataset=ts_dashboard_test&rows=1000&apikey=0f36dcd81171f4408301b87c9afc8f8e1294f744eafa61a0dbda3ea4&callback=?", function(budget) {
      var items = [];
      for (var i = 0; i < budget.records.length; i++) {
        b = budget.records[i];
        if (1 == 1) {
          $.each(budget, function(key, val) {
            items.push("<tr>");
            items.push("<td id=''" + key + "''>" + b.fields.object + "</td>");
            items.push("<td id=''" + key + "''>" + b.fields.description + "</td>");
            items.push("<td id=''" + key + "''>" + b.fields["2017_revised_budget"]  + "</td>");
            items.push("<td id=''" + key + "''>" +  b.fields["2017_actual"] + "</td>");
            items.push("<td id=''" + key + "''>" + b.fields["2017_encumbrances"]  + "</td>");
            items.push("<td id=''" + key + "''>" + b.fields["2017_available"] + "</td>");
            items.push("</tr>");
            }
          );
          //The join method joins the elements of the items array into a string.
          //The strings are then appended to the HTML table using the appendTo function.
          $("<tbody/>", {
            html: items.join("")
          }).appendTo("table");
        };
      };
    });
  </script>
</body>
</html>